---
title: 七.Git的工作区和暂存区（add、rm、commit、status命令）
toc: true
categories:
  - Git
  - Git基础
tags:
  - Git
abbrlink: 52878
date: 2019-07-05 20:08:18
---

## Git的基本工作流程

​	{% asset_img 8.png %}

<!--more-->

## 将文件放入暂存区（add）

- ### 第一次加入暂存区（将文件交给Git管理，加入Git跟踪）

```shell
$ git add 文件名或文件夹名  #将指定文件或文件夹放入暂存区
```

- ### 修改文件后，加入暂存区

  如果我们前面将某个文件（或多个文件）已经加入过暂存区，也就是交给Git管理了，如果我们修改若干个文件，需要再次将其加入暂存区，只需要输入一下命令：

```shell
$ git add -u
```

​	`-u`是update的意思，意思是将工作区当中，被Git管理了的文件一起提交到暂存区中。

​	交给Git管理的文件，在修改后都最好通过`git add`命令将其放入暂存区中，然后才能将其正式提交。



## 文件的移除（rm）

### 解除对文件的跟踪，并删除工作区的文件	

```shell
$ git rm 文件名 #该命令会将暂存区中的跟踪信息删除，还会删除工作区文件。
```

```shell
#git rm 文件名 命令相当于
rm 文件名 
git add -u 
```

​	如果在删除之前文件已经修改并放入暂存区处于未提交状态，为了安全性，系统是不会让你删除对这个文件的跟踪的（防止数据的丢失），我们可以使用`-f`选项强制删除。

###  解除对文件的跟踪，不删除工作区的文件

```shell
git rm --cached 文件名
```



## 将暂存区文件提交（commit）

```shell
$ git commit -m "提交信息" #将暂存区中的文件提交
```

​	在上一次暂存区提交操作之后，所有加入暂存区中的“信息”都称为一次集合，每一次提交就是将这一个集合提交上去。

**我们可以通过`-a`选项跳过使用暂存区域：**

```shell
$ git commit -am '提交信息' #a选项的作用是先将工作区中所有被跟踪并修改过的文件加入暂存区，然后提交
```

通过这种方式，工作区中修改的文件哪怕没有放入暂存区，也会被提交。



## 查看当前Git仓库的状态（status）

```shell
$ git status  #查看当前git仓库的状态，一定要进入git仓库的工作目录下面，才能使用该命令
```

### 状态简览

​	`git status` 命令的输出十分详细，但其用语有些繁琐。 如果你使用 `git status -s` 命令或 `git status --short` 命令，你将得到一种更为紧凑的格式输出。 运行 `git status -s` ，状态报告输出如下：

```shell
$ git status -s
M  README
MM Rakefile #两个M表示在第一修改放入暂存区后，又进行了一次修改，由于放入暂存区的快照是前一个版本，所以此时，老的版本在暂存区中，新的版本还未放入暂存区，在非暂存区中，所以出现了两个M。
A  lib/git.rb
M  lib/simplegit.rb
?? LICENSE.txt
```

符号含义如下：

？  表示未跟踪文件

A  新添加到暂存区中的文件显示为A

M  新修改的文件显示为M，出现在右边的 `M` 表示该文件被修改了但是还没放入暂存，出现在靠左边的 `M` 表示该文件被修改了并放入了暂存区。